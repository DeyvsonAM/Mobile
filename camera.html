<!DOCTYPE html>
<html lang="pt-br">

<head>
    <link rel="videofun" href="video.js">
    <link rel="stylesheet" href="assets/style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Camera</title>
</head>

<body>
    <header class="menu-top">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <div class="menu-icon">&#9776;</div>
                </div>
                <div class="col-md-6 text-center">
                    <div class="logo-tipo"><a href="index.html"><img src="assets/imagens/icone.png"
                                alt="icone PicKal"></a></div>
                </div>
            </div>
        </div>
    </header>

    <div class="columns">
        <div class="column">
            <div style="display: none;" id="fotoinv" >
                <p><img id="imageTag" width="240" height="180"></p>
                <p><small>Feijao com Arroz -- 250 kcal</small></p>
            </div>
            <video controls autoplay style="height:642px; width: 450px;"></video>
        </div>

    </div>






    <footer>

        <nav>
            <ul>
                <li></li>
                <li>
                    <p><button id="onBUTTON" type="button" onclick="getStream('video')">ON</button></p>


                    <p><button style="display: none;" id="Tirarfoto" type="button" onclick="takePhoto()"><svg
                                xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor"
                                class="bi bi-camera" viewBox="0 0 16 16">
                                <path
                                    d="M15 12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1h1.172a3 3 0 0 0 2.12-.879l.83-.828A1 1 0 0 1 6.827 3h2.344a1 1 0 0 1 .707.293l.828.828A3 3 0 0 0 12.828 5H14a1 1 0 0 1 1 1zM2 4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2h-1.172a2 2 0 0 1-1.414-.586l-.828-.828A2 2 0 0 0 9.172 2H6.828a2 2 0 0 0-1.414.586l-.828.828A2 2 0 0 1 3.172 4z" />
                                <path
                                    d="M8 11a2.5 2.5 0 1 1 0-5 2.5 2.5 0 0 1 0 5m0 1a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7M3 6.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0" />
                            </svg></a></button></p>



                </li>
                <li></li>
            </ul>
        </nav>
    </footer>
</body>

</html>

<script> //sitemas de bottoes
    document.addEventListener("DOMContentLoaded", function () {
        var onBUTTON = document.getElementById("onBUTTON");
        var fototirada = document.getElementById("fotoinv")
        var tirarfoto = document.getElementById("Tirarfoto");

        // Adiciona evento de clique ao bot達o de pesquisa
        onBUTTON.addEventListener("click", function () {
            // Exibe a barra de pesquisa
            tirarfoto.style.display = "block";
            // Oculta o bot達o de abrir pesquisa
            onBUTTON.style.display = "none";


        });
        tirarfoto.addEventListener("click", function () {
            fotoinv.style.display = "block";
        });

        // Adiciona evento de clique ao bot達o de fechar pesquisa
        closeSearchButton.addEventListener("click", function () {
            // Oculta a barra de pesquisa
            searchBar.style.display = "none";
            // Exibe o bot達o de abrir pesquisa
            searchButton.style.display = "block";
        });
    });



    //video/foto

    function getUserMedia(options, successCallback, failureCallback) {
        var api = navigator.getUserMedia || navigator.webkitGetUserMedia ||
            navigator.mozGetUserMedia || navigator.msGetUserMedia;
        if (api) {
            return api.bind(navigator)(options, successCallback, failureCallback);
        }
    }

    var theStream;

    function getStream() {
        if (!navigator.getUserMedia && !navigator.webkitGetUserMedia &&
            !navigator.mozGetUserMedia && !navigator.msGetUserMedia) {
            alert('User Media API not supported.');
            return;
        }

        var constraints = {
            video: true
        };

        getUserMedia(constraints, function (stream) {
            var mediaControl = document.querySelector('video');
            if ('srcObject' in mediaControl) {
                mediaControl.srcObject = stream;
            } else if (navigator.mozGetUserMedia) {
                mediaControl.mozSrcObject = stream;
            } else {
                mediaControl.src = (window.URL || window.webkitURL).createObjectURL(stream);
            }
            theStream = stream;
        }, function (err) {
            alert('Error: ' + err);
        });
    }

    function takePhoto() {
        if (!('ImageCapture' in window)) {
            alert('ImageCapture is not available');
            return;
        }

        if (!theStream) {
            alert('Grab the video stream first!');
            return;
        }

        var theImageCapturer = new ImageCapture(theStream.getVideoTracks()[0]);

        theImageCapturer.takePhoto()
            .then(blob => {
                var theImageTag = document.getElementById("imageTag");
                theImageTag.src = URL.createObjectURL(blob);
            })
            .catch(err => alert('Error: ' + err));
    }

</script>